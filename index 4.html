
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Lucien OTC æ™ºèƒ½åˆç´„ Escrow æœå‹™</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
  <style>
    body { font-family: "Arial", sans-serif; background: #f7f7f7; padding: 30px; color: #333; }
    .container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h1, h2 { color: #1e1e1e; }
    input { padding: 8px; width: 100%; margin-bottom: 10px; }
    button { padding: 10px 20px; background: #111; color: white; border: none; border-radius: 5px; cursor: pointer; }
    .section { margin-bottom: 40px; }
    #status { color: green; margin-top: 20px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Lucien OTC Escrow æ™ºèƒ½äº¤æ˜“å¹³å°</h1>
    <p>æ­¡è¿ä½¿ç”¨ Lucien æä¾›çš„å ´å¤–è™›æ“¬è³‡ç”¢äº¤æ˜“æ™ºèƒ½åˆç´„å¹³å°ã€‚æ‰€æœ‰æ¬¾é …åœ¨é›™æ–¹ç¢ºèªå‰çš†ç”±æ™ºèƒ½åˆç´„è‡ªå‹•ä¿ç®¡ã€‚</p>

    <div class="section">
      <h2>ğŸ“˜ äº¤æ˜“æµç¨‹</h2>
      <ol>
        <li>å¡«å…¥è³£æ–¹èˆ‡ä»²è£è€…åœ°å€</li>
        <li>è²·æ–¹é€é MetaMask ä»˜æ¬¾åˆ°æ™ºèƒ½åˆç´„</li>
        <li>äº¤æ˜“å®Œæˆå¾Œç”±ä»²è£è€…é‡‹æ”¾æ¬¾é …</li>
      </ol>
    </div>

    <div class="section">
      <h2>ğŸ§¾ é¢¨éšªæ­éœ²</h2>
      <p>æœ¬å¹³å°ç‚ºè‡ªå‹•åŒ–åˆç´„å¹³å°ï¼Œä¸¦éä¿¡è¨—æˆ–è³‡ç”¢ä»£ç®¡å–®ä½ã€‚åˆç´„å…¨ç¨‹è‡ªå‹•åŸ·è¡Œï¼Œç”¨æˆ¶è«‹è‡ªè¡Œå¯©æ…ç¢ºèªäº¤æ˜“å…§å®¹èˆ‡å°è±¡ã€‚</p>
    </div>

    <div class="section">
      <h2>ğŸ” å»ºç«‹ Escrow åˆç´„</h2>
      <button onclick="connectWallet()">é€£æ¥ MetaMask éŒ¢åŒ…</button><br><br>
      <label>è³£æ–¹åœ°å€ï¼š</label><input type="text" id="seller" value="0xSellerAddressHere">
      <label>ä»²è£äººåœ°å€ï¼š</label><input type="text" id="arbitrator" value="0xArbitratorAddressHere">
      <label>ä»˜æ¬¾é‡‘é¡ï¼ˆETHï¼‰ï¼š</label><input type="text" id="amount" value="0.01">
      <button onclick="sendEscrow()">æäº¤è‡³ Escrow</button>
      <p id="status"></p>
    </div>
  </div>

  <script>
    let web3;
    let accounts;

    async function connectWallet() {
      if (window.ethereum) {
        web3 = new Web3(window.ethereum);
        accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        document.getElementById("status").innerText = "âœ… éŒ¢åŒ…å·²é€£æ¥ï¼š" + accounts[0];
      } else {
        alert("è«‹å…ˆå®‰è£ MetaMask æ“´å……å¥—ä»¶ï¼");
      }
    }

    async function sendEscrow() {
      const seller = document.getElementById("seller").value;
      const arbitrator = document.getElementById("arbitrator").value;
      const amount = web3.utils.toWei(document.getElementById("amount").value, "ether");

      const contractBytecode = "è«‹å¡«å…¥å·²ç·¨è­¯çš„ Bytecode";
      const contractABI = []; // è«‹è²¼ä¸Š ABI JSON

      document.getElementById("status").innerText = "ğŸš§ äº¤æ˜“æäº¤ä¸­...";

      const contract = new web3.eth.Contract(contractABI);
      contract.deploy({
        data: contractBytecode,
        arguments: [seller, arbitrator]
      })
      .send({
        from: accounts[0],
        value: amount,
        gas: 3000000
      })
      .on('receipt', function(receipt){
        document.getElementById("status").innerText = "âœ… æˆåŠŸéƒ¨ç½²åˆç´„ï¼Œåˆç´„åœ°å€ï¼š" + receipt.contractAddress;
      })
      .on('error', function(error){
        document.getElementById("status").innerText = "âŒ éŒ¯èª¤ï¼š" + error.message;
      });
    }
  </script>
</body>
</html>
